<div class="row-fluid" ng-if="employee">
  <div class="span12">
    <div class="span2">
      <gravatar email="{{ employee.employee_email }}" default-image="{{ employee.image }}" size="200"></gravatar>
    </div>
    <div class="span8">
      <h2>
        {{ employee.first_name }} {{ employee.last_name }}
      </h2>
      <div class="row-fluid">
          <span><a href="mailto:{{ employee.employee_email }}">{{ employee.employee_email }}</a></span>
          <ul style="list-style:none; margin:0;">
            <li ng-repeat="phone in employee.employee_phone">
              <strong>{{ phone.phone_type }}</strong> {{ phone.number }} <span ng-if="phone.extension">ext. {{ phone.extension }}</span>
            </li>
          </ul>
      </div>
    </div>
    <div class="row-fluid">
      <div class="span12">
        <h3>Duties</h3>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Account Name</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="duty in employee.duty">
              <td><a ui-sref="crm.account({accountId: duty.account})">{{ duty.account_name }}</a></td>
              <td>{{ duty.description }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="row-fluid" ng-if="employee.viewing_videos">
      <div class="span12">
        <h3>Videos in Queue</h3>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th class="span6">Video</th>
              <th><div class="text-center">Rating</div></th>
              <th><div class="text-center">Recommended</div></th>
              <th><div class="text-center">Completed</div></th>
              <th><div class="text-center">Queued Since</div></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="video in employee.viewing_videos | orderBy:'-queued_since'" ng-if="!video.complete && video.queued_since && !video.completed">
              <td><a href="#/bookshelf/video/{{ video.video_segment.video_section.video }}/?segment={{ video.video_segment.id }}">{{ video.video_segment.title }}</a></td>
              <td><div class="text-center">{{ video.rate_this }}</div></td>
              <td><div class="text-center"><i class="fa" ng-class="{'fa-check': video.recommend_this}"></i></div></td>
              <td><div class="text-center">
                <i class="fa" ng-class="{'fa-check': video.completed}"></i>
                <input type="checkbox" ng-if="!video.completed" ng-click="markCompleted(video)" title="Forever Mark as Completed">
              </div></td>
              <td><div class="text-center">{{ video.queued_since | date:'MMM d, yyyy h:mm' }}</div></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="row-fluid" ng-if="employee.viewing_videos">
      <div class="span12">
        <h3>Last viewed videos</h3>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th class="span6">Video</th>
              <th><div class="text-center">Rating</div></th>
              <th><div class="text-center">Recommended</div></th>
              <th><div class="text-center">Completed</div></th>
              <th><div class="text-center">Last Viewed</div></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="video in employee.viewing_videos | orderBy:'-last_viewed' | limitTo:'5'" ng-if="video.last_viewed">
              <td><a href="#/bookshelf/video/{{ video.video_segment.video_section.video }}/?segment={{ video.video_segment.id }}">{{ video.video_segment.title }}</a></td>
              <td><div class="text-center">{{ video.rate_this }}</div></td>
              <td><div class="text-center"><i class="fa" ng-class="{'fa-check': video.recommend_this}"></i></div></td>
              <td><div class="text-center">
                <i class="fa" ng-class="{'fa-check': video.completed}"></i>
              </div></td>
              <td><div class="text-center">{{ video.last_viewed | date:'MMM d, yyyy h:mm' }}</div></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="row-fluid" ng-if="employee.viewing_videos">
      <div class="span12">
        <h3>Books in Queue</h3>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th class="span6">Book</th>
              <th><div class="text-center">Rating</div></th>
              <th><div class="text-center">Recommended</div></th>
              <th><div class="text-center">Completed</div></th>
              <th><div class="text-center">Queued Since</div></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="book in employee.viewing_books | orderBy:'-queued_since'" ng-if="!book.complete && book.queued_since && !book.completed">
              <td><a href="#/bookshelf/book/{{ book.book.slug }}/">{{ book.book.title }}</a></td>
              <td><div class="text-center">{{ book.rate_this }}</div></td>
              <td><div class="text-center"><i class="fa" ng-class="{'fa-check': book.recommend_this}"></i></div></td>
              <td><div class="text-center">
                <i class="fa" ng-class="{'fa-check': book.completed}"></i>
                <input type="checkbox" ng-if="!book.completed" ng-click="markCompleted(book)" title="Forever Mark as Completed">
              </div></td>
              <td><div class="text-center">{{ book.queued_since | date:'MMM d, yyyy h:mm' }}</div></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="row-fluid" ng-if="employee.viewing_books">
      <div class="span12">
        <h3>Last Viewed Books</h3>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th class="span6">Book</th>
              <th><div class="text-center">Rating</div></th>
              <th><div class="text-center">Recommended</div></th>
              <th><div class="text-center">Completed</div></th>
              <th><div class="text-center">Queued Since</div></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="book in employee.viewing_books | orderBy:'-last_viewed' | limitTo:'5'" ng-if="book.last_viewed">
              <td><a href="#/bookshelf/book/{{ book.book.slug }}/">{{ book.book.title }}</a></td>
              <td><div class="text-center">{{ book.rate_this }}</div></td>
              <td><div class="text-center"><i class="fa" ng-class="{'fa-check': book.recommend_this}"></i></div></td>
              <td><div class="text-center">
                <i class="fa" ng-class="{'fa-check': book.completed}"></i>
              </div></td>
              <td><div class="text-center">{{ book.queued_since | date:'MMM d, yyyy h:mm' }}</div></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<div ng-if="message">
  <div class="alert alert-danger">
    {{ message }}
  </div>
</div>
